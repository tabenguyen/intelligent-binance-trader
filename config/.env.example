# =============================================================================
# Binance API Configuration
# =============================================================================
# Get your API keys from:
# - Testnet: https://testnet.binance.vision/
# - Live: https://www.binance.com/en/my/settings/api-management

BINANCE_API_KEY=your_api_key_here
BINANCE_API_SECRET=your_secret_key_here

# Set to True for testnet, False for live trading
USE_TESTNET=True

# =============================================================================
# Trading Configuration - 4-Hour High-Quality Strategy
# =============================================================================

# LEGACY: Fixed trade amount (used when ENABLE_DYNAMIC_POSITION_SIZING=false)
TRADE_AMOUNT_USDT=25.0

# Risk-to-reward ratio (higher for swing trading)
RISK_REWARD_RATIO=2.0

# Minimum USDT balance required to place trades
MIN_USDT_BALANCE=150.0

# =============================================================================
# SOPHISTICATED RISK MANAGEMENT
# =============================================================================

# Dynamic Position Sizing - Professional Risk Management
# Risk a fixed percentage of total capital instead of fixed dollar amount
ENABLE_DYNAMIC_POSITION_SIZING=true

# Percentage of total trading capital to risk per trade (recommended: 1-2%)
RISK_PERCENTAGE_PER_TRADE=1.5

# Minimum Risk-to-Reward Ratio Filter
# Reject trades with poor profit potential (recommended: 1.5 or higher)
MINIMUM_RR_RATIO=1.5

# Position sizing limits for safety
MAX_POSITION_SIZE_USDT=100.0      # Maximum position size regardless of calculation
MIN_POSITION_SIZE_USDT=10.0       # Minimum position size to ensure meaningful trades

# Minimum notional value for trade execution (Binance requirement)
MIN_NOTIONAL_USDT=15.0            # Minimum USDT value for any trade order

# =============================================================================
# DYNAMIC POSITION SIZING FORMULA:
# =============================================================================
# 
# Position Size = (Total Capital * Risk %) / (Entry Price - Stop Loss Price)
# 
# BENEFITS:
# • Risk less when stop loss is far (volatile conditions)
# • Risk more when stop loss is tight (stable conditions)  
# • Consistent risk percentage across all trades
# • Dramatically reduces risk of ruin
# • Professional money management approach
#
# EXAMPLE:
# Total Capital: $1000
# Risk Percentage: 1.5%
# Entry: $100, Stop: $95 (5% stop)
# Position Size = ($1000 * 1.5%) / ($100 - $95) = $15 / $5 = $3 (3 shares)
# Risk Amount = $3 * $5 = $15 (exactly 1.5% of capital)
#
# =============================================================================

# =============================================================================
# Limit Order Configuration
# =============================================================================

# Maximum retries for limit buy orders (more patience for 4H timeframe)
MAX_LIMIT_ORDER_RETRIES=15

# Delay between retries in seconds (longer for 4H)
LIMIT_ORDER_RETRY_DELAY=10

# =============================================================================
# ADVANCED QUALITY FILTERS - High-Quality Signal Selection
# =============================================================================

# Multi-Timeframe Trend Filter
# Only takes long positions if price is above daily 50-EMA
# Prevents counter-trend trades - HIGHLY RECOMMENDED
ENABLE_DAILY_TREND_FILTER=True

# ATR Volatility Filter  
# Avoids choppy markets (too low volatility) and chaotic markets (too high volatility)
# Ensures optimal trading conditions - HIGHLY RECOMMENDED
ENABLE_ATR_FILTER=True

# Volume Confirmation Filter
# Requires strong volume backing for signals
# Confirms genuine buying pressure - HIGHLY RECOMMENDED  
ENABLE_VOLUME_FILTER=True

# Minimum volume ratio (current volume vs 20-period average)
# 1.2 = 20% above average volume required
MIN_VOLUME_RATIO=1.2

# =============================================================================
# Filter Configuration Notes:
# =============================================================================
# 
# For MAXIMUM quality (recommended):
# - Enable all three filters (True, True, True)
# - This will reduce signal frequency but increase win rate
# 
# For more frequent signals (less strict):
# - You can disable individual filters by setting to False
# - Start with all enabled and adjust based on your preference
# 
# Volume ratio settings:
# - 1.2 (20% above average) = Moderate filter
# - 1.5 (50% above average) = Strict filter  
# - 1.0 (average volume) = Loose filter
# 
# =============================================================================

# ═══════════════════════════════════════════════════════════════
# ADVANCED EXIT STRATEGIES
# ═══════════════════════════════════════════════════════════════
# Enable sophisticated exit management to maximize gains and minimize risk
ENABLE_ADVANCED_EXITS=true

# TRAILING STOP LOSS
# Dynamically adjust stop loss based on ATR (Average True Range)
# Trail stop follows price up but never moves down
ENABLE_TRAILING_STOP=true
TRAILING_STOP_ATR_MULTIPLIER=2.0  # Stop distance = Current Price - (ATR × 2.0)

# PARTIAL TAKE PROFITS
# Scale out of positions to lock in profits while maintaining upside exposure
ENABLE_PARTIAL_PROFITS=true

# Take Profit 1: Sell 50% of position when profit reaches 1.5:1 Risk:Reward ratio
PARTIAL_TP1_RATIO=1.5             # R:R ratio to trigger first partial exit
PARTIAL_TP1_PERCENTAGE=0.5        # Percentage of position to sell (50%)

# Take Profit 2: Sell remaining 50% when profit reaches 3:1 Risk:Reward ratio  
PARTIAL_TP2_RATIO=3.0             # R:R ratio to trigger second partial exit

# =============================================================================
# ADVANCED EXIT STRATEGY LOGIC:
# =============================================================================
# 
# This sophisticated exit system maximizes profits while minimizing risk:
# 
# 1. ENTRY: Position opens with initial OCO order (stop loss + take profit)
# 
# 2. FIRST PARTIAL EXIT (TP1):
#    - When profit reaches 1.5:1 Risk:Reward ratio
#    - Sell 50% of position (locks in early profit)
#    - Move stop loss to breakeven (remaining position becomes risk-free)
# 
# 3. TRAILING STOP MANAGEMENT:
#    - ATR-based trailing stop for remaining 50%
#    - Stop follows price up but never moves down
#    - Distance = Current Price - (ATR × 2.0)
# 
# 4. SECOND PARTIAL EXIT (TP2):
#    - When profit reaches 3:1 Risk:Reward ratio
#    - Sell remaining 50% (full exit with maximum profit)
# 
# BENEFITS:
# - Locks in profits early (reduces risk)
# - Allows for maximum upside capture
# - Risk-free position after TP1
# - Adapts to market volatility (ATR-based)
# 
# =============================================================================

ENABLE_ADVANCED_EXITS=true
ENABLE_TRAILING_STOP=true
ENABLE_PARTIAL_PROFITS=true
TRAILING_STOP_ATR_MULTIPLIER=2.0
PARTIAL_TP1_RATIO=1.5
PARTIAL_TP2_RATIO=3.0
PARTIAL_TP1_PERCENTAGE=0.5

# =============================================================================
# INTELLIGENT WATCHLIST SCANNER
# =============================================================================

# Enable relative strength ranking to prioritize strongest coins
ENABLE_RELATIVE_STRENGTH_RANKING=true

# Performance lookback period for ranking (7 or 14 days recommended)
RELATIVE_STRENGTH_LOOKBACK_DAYS=14

# Only trade top percentage of performers (20-30% recommended)
TOP_PERFORMERS_PERCENTAGE=25

# Minimum number of coins to analyze for ranking
MIN_COINS_FOR_RANKING=5

# Re-ranking frequency in hours (how often to update rankings)
RANKING_UPDATE_FREQUENCY_HOURS=4

# =============================================================================
# RELATIVE STRENGTH RANKING LOGIC:
# =============================================================================
# 
# The bot analyzes all watchlist coins over the specified lookback period and:
# 1. Calculates percentage performance for each coin
# 2. Ranks coins from strongest to weakest performers  
# 3. Only considers buy signals from top 25% of performers
# 4. Updates rankings every 4 hours to stay current
#
# BENEFITS:
# • Focuses capital on coins with proven momentum
# • Avoids weak coins that may continue declining
# • Increases probability of successful breakouts
# • Concentrates firepower on best opportunities
# • Follows the "buy strength, sell weakness" principle
#
# EXAMPLE:
# Watchlist: 20 coins
# Top 25%: Only top 5 performers eligible for trades
# Lookback: 14 days (captures medium-term strength)
# Update: Every 4 hours (stays responsive to changes)
#
# =============================================================================
